<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MONGODB | Possible Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/avatar.jpg">
    <meta name="description" content="学习记录">
    
    <link rel="preload" href="/assets/css/0.styles.6947a286.css" as="style"><link rel="preload" href="/assets/js/app.6f19dab6.js" as="script"><link rel="preload" href="/assets/js/2.f83ece46.js" as="script"><link rel="preload" href="/assets/js/18.0c25836e.js" as="script"><link rel="prefetch" href="/assets/js/10.880c193e.js"><link rel="prefetch" href="/assets/js/11.cc4f994e.js"><link rel="prefetch" href="/assets/js/12.4067172c.js"><link rel="prefetch" href="/assets/js/13.79fac396.js"><link rel="prefetch" href="/assets/js/14.d0a87afb.js"><link rel="prefetch" href="/assets/js/15.a277c7f0.js"><link rel="prefetch" href="/assets/js/16.662ad650.js"><link rel="prefetch" href="/assets/js/17.278cdac4.js"><link rel="prefetch" href="/assets/js/19.0078c134.js"><link rel="prefetch" href="/assets/js/20.e447f054.js"><link rel="prefetch" href="/assets/js/21.d7e17edf.js"><link rel="prefetch" href="/assets/js/22.7d51db74.js"><link rel="prefetch" href="/assets/js/23.5bb3cb00.js"><link rel="prefetch" href="/assets/js/24.262aa964.js"><link rel="prefetch" href="/assets/js/25.cde35b54.js"><link rel="prefetch" href="/assets/js/26.5d186e5b.js"><link rel="prefetch" href="/assets/js/27.c4493604.js"><link rel="prefetch" href="/assets/js/28.bfc32898.js"><link rel="prefetch" href="/assets/js/29.e30db05a.js"><link rel="prefetch" href="/assets/js/3.50905b32.js"><link rel="prefetch" href="/assets/js/30.ef2d5419.js"><link rel="prefetch" href="/assets/js/31.dea89d4f.js"><link rel="prefetch" href="/assets/js/32.c6b89ecd.js"><link rel="prefetch" href="/assets/js/33.c16f4215.js"><link rel="prefetch" href="/assets/js/34.aa713387.js"><link rel="prefetch" href="/assets/js/35.a05998b9.js"><link rel="prefetch" href="/assets/js/36.601fcca1.js"><link rel="prefetch" href="/assets/js/37.e58d046b.js"><link rel="prefetch" href="/assets/js/38.29d70093.js"><link rel="prefetch" href="/assets/js/4.990f1ed9.js"><link rel="prefetch" href="/assets/js/5.41689860.js"><link rel="prefetch" href="/assets/js/6.0dd03070.js"><link rel="prefetch" href="/assets/js/7.1d8189c8.js"><link rel="prefetch" href="/assets/js/8.15ff1701.js"><link rel="prefetch" href="/assets/js/9.d102ccd8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6947a286.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.jpg" alt="Possible Blog" class="logo"> <span class="site-name can-hide">Possible Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><span class="title">学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习" class="mobile-dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/" class="nav-link">
  js
</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">
  css
</a></li></ul></li><li class="dropdown-item"><h4>
          后端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/" class="nav-link router-link-active">
  java
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/" class="nav-link">
  other
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES6
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN/component/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element-UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://jquery.cuishifeng.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jQuery
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v3.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bootstrap
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://echarts.apache.org/zh/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://semantic-ui.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Semantic UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://nodejs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.tslang.cn/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.webpackjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Webpack
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微信公众平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://2x.antdv.com/components/modal-cn#API" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant Design Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://mockjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mockjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Npm
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.sass.hk/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Scss
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://less.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Less
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://spring.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://spring.io/projects/spring-data-jpa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Data
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://spring.io/projects/spring-boot#learn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://spring.io/projects/spring-cloud#learn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Cloud
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.redis.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Redis
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://elasticsearch.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElasticSearch
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mybatis.org/mybatis-3/zh/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mybatis
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mybatis.plus/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MybatisPlus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.thymeleaf.org/documentation.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thymeleaf
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.ityouknow.com/springboot/2017/06/26/spring-boot-shiro.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Shiro
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://dubbo.apache.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dubbo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zookeeper.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Zookeeper
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          资源共享
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://docs.oracle.com/javaee/7/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java7 API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://docs.oracle.com/javase/8/docs/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java8 API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mrjokersince1997.github.io/My-Notes/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 学习笔记
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.zybuluo.com/mdeditor" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Markdown
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mvnrepository.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Maven Repo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Iconfont
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://dribbble.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dribbble
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://promotion.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://portal.qiniu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  七牛云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://119.29.91.242:8888/20151110132" target="_blank" rel="noopener noreferrer" class="nav-link external">
  宝塔
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发手册" class="dropdown-title"><span class="title">开发手册</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发手册" class="mobile-dropdown-title"><span class="title">开发手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java开发手册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/manual/" class="nav-link">
  联塑
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="外部链接" class="dropdown-title"><span class="title">外部链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="外部链接" class="mobile-dropdown-title"><span class="title">外部链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.ityouknow.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  纯洁的微笑
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.fangzhipeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  方志朋的专栏
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/QQQQYY" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/chu_li_zhu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.bilibili.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  哔哩哔哩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.imooc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  慕课网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.itheima.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  黑马程序员
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://qqqqyy.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><span class="title">学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习" class="mobile-dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/js/" class="nav-link">
  js
</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">
  css
</a></li></ul></li><li class="dropdown-item"><h4>
          后端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/" class="nav-link router-link-active">
  java
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/" class="nav-link">
  other
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分享" class="dropdown-title"><span class="title">分享</span> <span class="arrow down"></span></button> <button type="button" aria-label="分享" class="mobile-dropdown-title"><span class="title">分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ES6
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://element.eleme.cn/#/zh-CN/component/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Element-UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://jquery.cuishifeng.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  jQuery
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v3.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bootstrap
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://echarts.apache.org/zh/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ECharts
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://semantic-ui.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Semantic UI
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://nodejs.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Node.js
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.tslang.cn/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.webpackjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Webpack
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微信公众平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://2x.antdv.com/components/modal-cn#API" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Ant Design Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://mockjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mockjs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Npm
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.sass.hk/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Scss
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://less.bootcss.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Less
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Java
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://spring.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://spring.io/projects/spring-data-jpa" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Data
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://spring.io/projects/spring-boot#learn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://spring.io/projects/spring-cloud#learn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Cloud
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.redis.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Redis
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://elasticsearch.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ElasticSearch
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mybatis.org/mybatis-3/zh/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mybatis
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mybatis.plus/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  MybatisPlus
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.thymeleaf.org/documentation.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Thymeleaf
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://www.ityouknow.com/springboot/2017/06/26/spring-boot-shiro.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Shiro
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://dubbo.apache.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dubbo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zookeeper.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Zookeeper
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Docker
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          资源共享
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://docs.oracle.com/javaee/7/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java7 API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://docs.oracle.com/javase/8/docs/api/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java8 API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Apache
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mrjokersince1997.github.io/My-Notes/#/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 学习笔记
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.zybuluo.com/mdeditor" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Markdown
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://mvnrepository.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Maven Repo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Iconfont
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://dribbble.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dribbble
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          服务器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://promotion.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://portal.qiniu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  七牛云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://119.29.91.242:8888/20151110132" target="_blank" rel="noopener noreferrer" class="nav-link external">
  宝塔
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发手册" class="dropdown-title"><span class="title">开发手册</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发手册" class="mobile-dropdown-title"><span class="title">开发手册</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java开发手册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/manual/" class="nav-link">
  联塑
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="外部链接" class="dropdown-title"><span class="title">外部链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="外部链接" class="mobile-dropdown-title"><span class="title">外部链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.ityouknow.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  纯洁的微笑
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.fangzhipeng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  方志朋的专栏
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/QQQQYY" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/chu_li_zhu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.bilibili.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  哔哩哔哩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.imooc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  慕课网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.itheima.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  黑马程序员
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://qqqqyy.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/java/" aria-current="page" class="sidebar-link">这是Java页面</a></li><li><a href="/java/route.html" class="sidebar-link">Java学习路线</a></li><li><a href="/java/spring.html" class="sidebar-link">Spring</a></li><li><a href="/java/springmvc.html" class="sidebar-link">SpringMVC</a></li><li><a href="/java/springdata_jpa.html" class="sidebar-link">Spring Data JPA</a></li><li><a href="/java/springboot.html" class="sidebar-link">Spring BOOT</a></li><li><a href="/java/springcloud.html" class="sidebar-link">Spring Cloud</a></li><li><a href="/java/springcloud-02.html" class="sidebar-link">Spring Cloud</a></li><li><a href="/java/mybatis-plus.html" class="sidebar-link">Mybatis-Plus</a></li><li><a href="/java/shiro.html" class="sidebar-link">Shiro</a></li><li><a href="/java/shiro-two.html" class="sidebar-link">Shiro-TWO</a></li><li><a href="/java/redis.html" class="sidebar-link">Redis</a></li><li><a href="/java/mongodb.html" aria-current="page" class="active sidebar-link">MONGODB</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/mongodb.html#一、nosql" class="sidebar-link">一、NoSQL</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#二、mongodb快速上手" class="sidebar-link">二、MongoDB快速上手</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#三、mongodb核心概念" class="sidebar-link">三、MongoDB核心概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/mongodb.html#业务应用场景" class="sidebar-link">业务应用场景</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#什么是mongodb" class="sidebar-link">什么是MongoDB</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#体系结构" class="sidebar-link">体系结构</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#数据模型" class="sidebar-link">数据模型</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#mongodb的特点" class="sidebar-link">MongoDB的特点</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#四、单机部署" class="sidebar-link">四、单机部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/mongodb.html#windows系统中的安装启动" class="sidebar-link">Windows系统中的安装启动</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#shell链接-mongo命令" class="sidebar-link">Shell链接（Mongo命令）</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#compass-图形化界面客户端" class="sidebar-link">Compass-图形化界面客户端</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#linux系统中的安装启动和连接" class="sidebar-link">Linux系统中的安装启动和连接</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#五、基本常用命令" class="sidebar-link">五、基本常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/mongodb.html#案例需求" class="sidebar-link">案例需求</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#数据库操作" class="sidebar-link">数据库操作</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#集合操作" class="sidebar-link">集合操作</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#文档基本crud" class="sidebar-link">文档基本CRUD</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#文档的分页查询" class="sidebar-link">文档的分页查询</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#文档的更多查询" class="sidebar-link">文档的更多查询</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#常用命令小结" class="sidebar-link">常用命令小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#六、索引-index" class="sidebar-link">六、索引-Index</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/mongodb.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#索引的类型" class="sidebar-link">索引的类型</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#索引的管理操作" class="sidebar-link">索引的管理操作</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#索引的引用" class="sidebar-link">索引的引用</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#七、文章评论" class="sidebar-link">七、文章评论</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/mongodb.html#需求分析" class="sidebar-link">需求分析</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#表结构分析" class="sidebar-link">表结构分析</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#技术选项" class="sidebar-link">技术选项</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#文档微服务模块搭建" class="sidebar-link">文档微服务模块搭建</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#文章品论实体类的编写" class="sidebar-link">文章品论实体类的编写</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#文章评论的基本增删改查操作" class="sidebar-link">文章评论的基本增删改查操作</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#根据上级id查询文章评论的分页列表" class="sidebar-link">根据上级ID查询文章评论的分页列表</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#mongotemplate实现评论点赞" class="sidebar-link">MongoTemplate实现评论点赞</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#八、mongodb集群和安全" class="sidebar-link">八、MongoDB集群和安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/mongodb.html#课程目标" class="sidebar-link">课程目标</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#九、副本集" class="sidebar-link">九、副本集</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#十、分片集群" class="sidebar-link">十、分片集群</a></li><li class="sidebar-sub-header"><a href="/java/mongodb.html#十一、安全认证" class="sidebar-link">十一、安全认证</a></li></ul></li><li><a href="/java/swagger.html" class="sidebar-link">Swagger</a></li><li><a href="/java/dubbo+zookeeper.html" class="sidebar-link">Zookeeper、Dubbo</a></li><li><a href="/java/interview.html" class="sidebar-link">面试题</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mongodb"><a href="#mongodb" class="header-anchor">#</a> MONGODB</h1> <h2 id="一、nosql"><a href="#一、nosql" class="header-anchor">#</a> 一、NoSQL</h2> <p>数据库排名：<code>https://db-engines.com/en/ranking</code></p> <p>中文社区网：<code>https://mongoing.com/</code></p> <p>官方文档中文版：<code>https://docs.mongoing.com/</code></p> <p>官网：<code>https://www.mongodb.com/</code></p> <p>学习笔记：<code>https://gitee.com/heguangchuan/rainmeter/blob/master/07-mongodb.md</code></p> <p>Linux防火墙：<code>http://t.zoukankan.com/mihoutao-p-13254367.html</code></p> <h2 id="二、mongodb快速上手"><a href="#二、mongodb快速上手" class="header-anchor">#</a> 二、MongoDB快速上手</h2> <p><strong>课程目标：</strong></p> <ul><li>理解MongoDB的业务场景、熟悉MongoDB的简介、特点和体系结构、数据类型等；</li> <li>能够在Window和Linux下安装和启动MongoDB，图形化管理界面Compass的安装和使用</li> <li>掌握MongoDB基本常用命令实现数据的CRUD</li> <li>掌握MongoDB的索引类型、索引管理、执行计划</li> <li>使用Spring Data MongoDB完成文章评论业务的开发</li></ul> <h2 id="三、mongodb核心概念"><a href="#三、mongodb核心概念" class="header-anchor">#</a> 三、MongoDB核心概念</h2> <h3 id="业务应用场景"><a href="#业务应用场景" class="header-anchor">#</a> 业务应用场景</h3> <p>传统的关系数据库（如MySQL），在数据操作的“三高”需求以及应对Web2.0的网站需求面前，显得力不从心。</p> <p>解释“三高”需求：</p> <ul><li>High performance：对于数据库高并发读写的需求 (高并发)</li> <li>Huge Storage：对海量数据的高效率存储和访问的需求 （高性能）</li> <li>High Scalability &amp;&amp; High Avaukability：对数据库的高可扩展性和高可用性的需求</li></ul> <p>而MongoDB可应对“三高”需求</p> <p><strong>具体的应用场景如：</strong></p> <p>​	1、社交场景：使用MongoDB存储用户信息，以及用户发表的朋友圈信息，通过地理位置索引实现附近的人、		  地点等功能。</p> <p>​	2、游戏场景：使用MongoDB存储用户游戏信息，用户的装备，积分等直接以内嵌文档的形式存储，方便查		  询、高效率存储和访问。</p> <p>​	3、物理场景：使用MongoDB存储订单信息，订单状态在运送过程中会不断更新，以MongoDB内嵌数组的形式</p> <p>​		  存储，一次查询就能将订单所有的变更读取出来。</p> <p>​	4、物联网场景：使用MongoDB存储所有接入的智能设备信息，以及设备汇报的日志信息，并对这些信息进行     	      多维的分析。</p> <p>​	5、视频直播：使用MongoDB存储用户信息，点赞互动信息等。</p> <p><strong>这些应用场景中，数据操作方面的共同特点是：</strong></p> <p>​	1、数据量大</p> <p>​	2、写入操作频繁（读写都很频繁）</p> <p>​	3、价值较低的数据，对事务性要求不高</p> <p>对于这样的数据，我们更适合使用MongoDB来实现数据的存储。</p> <p><strong>什么时候选择MongoDB</strong></p> <p>在架构选型上，除了上述的三个特点外，如果你还犹豫是否要选择它？可以考虑以下的一些问题：</p> <ul><li>应用不需要事务及复杂 join 支持</li> <li>新应用，需求会变，数据模型无法确定，想快速迭代开发</li> <li>应用需要2000-3000以上的读写QPS（更高也可以）</li> <li>应用需要TB甚至 PB 级别数据存储</li> <li>应用发展迅速，需要能快速水平扩展</li> <li>应用要求存储的数据不丢失</li> <li>应用需要99.999%高可用</li> <li>应用需要大量的地理位置查询、文本查询</li></ul> <p>如果上述有1个符合，可以考虑 MongoDB，2个及以上的符合，选择 MongoDB 绝不会后悔。</p> <p><strong>思考：如果用MySQL呢？</strong></p> <p>答：相对MySQL，可以以更低的成本解决问题（包括学习、开发、运维等成本）</p> <h3 id="什么是mongodb"><a href="#什么是mongodb" class="header-anchor">#</a> <strong>什么是MongoDB</strong></h3> <ul><li><p>MongoDB是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。</p></li> <li><p>在高负载的情况下，添加更多的节点，可以保证服务器的性能</p></li> <li><p>MongoDB旨在为WEB应用提供可扩展性的高性能数据存储解决方案。</p></li> <li><p>MongoDB将数据存储在一个文档，数据结构由键值(key =&gt; value)对组成。MongoDB文档类似于JSON对象。字段值可以包含其他文档，数组以及文档数组。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">{</span>
	name:<span class="token string">&quot;sue&quot;</span>,                <span class="token comment"># &lt;---- field:value</span>
	age: <span class="token number">26</span>,                   <span class="token comment"># &lt;---- field:value</span>
	status: <span class="token string">&quot;A&quot;</span>,               <span class="token comment"># &lt;---- field:value</span>
	group: <span class="token punctuation">[</span><span class="token string">&quot;news&quot;</span>,<span class="token string">&quot;sports&quot;</span><span class="token punctuation">]</span>   <span class="token comment"># &lt;---- field:value</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="体系结构"><a href="#体系结构" class="header-anchor">#</a> 体系结构</h3> <p>MySQL和MongoDB对比：</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623204593(1).jpg" alt="1623204593(1)"></p> <table><thead><tr><th style="text-align:left;">SQL术语/概念</th> <th>MongoDB术语/概念</th> <th style="text-align:left;">解释/说明</th></tr></thead> <tbody><tr><td style="text-align:left;">database</td> <td>database</td> <td style="text-align:left;">数据库</td></tr> <tr><td style="text-align:left;">table</td> <td>collection</td> <td style="text-align:left;">数据库表/集合</td></tr> <tr><td style="text-align:left;">row</td> <td>document</td> <td style="text-align:left;">数据记录行/文档</td></tr> <tr><td style="text-align:left;">column</td> <td>field</td> <td style="text-align:left;">数据字段/域</td></tr> <tr><td style="text-align:left;">index</td> <td>index</td> <td style="text-align:left;">索引</td></tr> <tr><td style="text-align:left;">table joins</td> <td></td> <td style="text-align:left;">表连接，MongoDB不支持</td></tr> <tr><td style="text-align:left;"></td> <td>嵌入文档</td> <td style="text-align:left;">MongoDB通过嵌入式文档来替代多表连接</td></tr> <tr><td style="text-align:left;">primary key</td> <td>primary key</td> <td style="text-align:left;">主键、MongoDB自动将<code>_id</code>字段设置为主键_</td></tr></tbody></table> <h3 id="数据模型"><a href="#数据模型" class="header-anchor">#</a> 数据模型</h3> <p>MongoDB的最小存储单位就是文档（document）对象。文档（document）对象对应于关系型数据库的行。数据在MongoDB中以BSON（Binary-JSON）文档的格式存储在磁盘上。</p> <p>BSON（Binary Serialized Document Format）是一种类似json的一种二进制形式的存储格式，简称Binary JSON。BSON和JSON一样，支持内嵌的文档对象和数组对象，但是BSON有JSON没有的一些数据类型，如DATE和BinData类型</p> <p>BSON采用了类似于 C 语言结构体的名称、对表示方法，支持内嵌的文档对象和数组对象，具有轻量性、可遍历性、高效性的三个特点，可 以有效描述非结构化数据和结构化数据。这种格式的优点是灵活性高，但它的缺点是空间利用率不是很理想。</p> <p>Bson中，除了基本的JSON类型：string,integer,boolean,double,null,array和object，mongo还使用了特殊的数据类型。这些类型包括 date,object id,binary data,regular expression 和code。每一个驱动都以特定语言的方式实现了这些类型，查看你的驱动的文档来获取详 细信息。</p> <table><thead><tr><th>数据类型</th> <th>描述</th> <th>举例</th></tr></thead> <tbody><tr><td>字符串</td> <td>UTF-8字符串都可表示为字符串类型的数据</td> <td>{&quot;x&quot;:&quot;foobar&quot;}</td></tr> <tr><td>对象id</td> <td>对象id是文档的12字节的唯一ID</td> <td>{&quot;x&quot;:ObjectId()}</td></tr> <tr><td>布尔值</td> <td>真或者假：true或者false</td> <td>{&quot;x&quot;:true}+</td></tr> <tr><td>数组</td> <td>值的集合或者列表可以表示成数组</td> <td>{&quot;x&quot; ： [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]}</td></tr> <tr><td>32位整数</td> <td>类型不可用。JavaScript仅支持64位浮点数，所以32位整数会被 自动转换。</td> <td>shell是不支持该类型的，shell中默认会转换成64 位浮点数</td></tr> <tr><td>64位整数</td> <td>不支持这个类型。shell会使用一个特殊的内嵌文档来显示64位 整数</td> <td>shell是不支持该类型的，shell中默认会转换成64 位浮点数</td></tr> <tr><td>64位浮点数</td> <td>shell中的数字就是这一种类型</td> <td>{&quot;x&quot;：3.14159，&quot;y&quot;：3}</td></tr> <tr><td>null</td> <td>表示空值或者未定义的对象</td> <td>{&quot;x&quot;:null}</td></tr> <tr><td>undefined</td> <td>文档中也可以使用未定义类型</td> <td>{&quot;x&quot;:undefined}</td></tr> <tr><td>符号</td> <td>shell不支持，shell会将数据库中的符号类型的数据自动转换成 字符串</td> <td></td></tr> <tr><td>正则表达式</td> <td>文档中可以包含正则表达式，采用JavaScript的正则表达式语法</td> <td>{&quot;x&quot; ： /foobar/i}</td></tr> <tr><td>代码</td> <td>文档中还可以包含JavaScript代码</td> <td>{&quot;x&quot; ： function() { /* …… */ }}</td></tr> <tr><td>二进制数据</td> <td>二进制数据可以由任意字节的串组成，不过shell中无法使用</td> <td></td></tr> <tr><td>最大值/最 小值</td> <td>BSON包括一个特殊类型，表示可能的最大值。shell中没有这个 类型。</td> <td></td></tr></tbody></table> <h3 id="mongodb的特点"><a href="#mongodb的特点" class="header-anchor">#</a> MongoDB的特点</h3> <p>MongoDB主要有如下特点：</p> <p>1、高性能</p> <p>​	MongoDB提供高性能的数据持久化。特别是：</p> <p>​	对嵌入式数据模型的支持减少了数据库系统上的I/O活动。</p> <p>​	索引支持更快的查询，并且可以包含来自嵌入式文档和数组的键。（文本索引解决搜索的需求、TTL索引解决历	史数据自动过期的需求、地 理位置索引可用于构建各种 O2O 应用）</p> <p>​	mmapv1、wiredtiger、mongorocks（rocksdb）、in-memory 等多引擎支持满足各种场景需求。</p> <p>​	Gridfs解决文件存储的需求。</p> <p>2、高可用性</p> <p>​	MongoDB的复制工具称为副本集（replica set），它可提供自动故障转移和数据冗余。</p> <p>3、高扩展性</p> <p>​	MongoDB提供了水平可扩展性作为其核心功能的一部分。</p> <p>​	分片将数据分布在一组集群的机器上。（海量数据存储，服务能力水平扩展）</p> <p>​	从3.4开始，MongoDB支持基于片键创建数据区域。在一个平衡的集群中，MongoDB将一个区域所覆盖的读写	只定向到该区域内的那些 片。</p> <p>4、丰富的查询支持</p> <p>​	MongoDB支持丰富的查询语言，支持读和写操作(CRUD)，比如数据聚合、文本搜索和地理空间查询等。</p> <p>5、其他特点：如无模式（动态模式）、灵活的文档模型</p> <h2 id="四、单机部署"><a href="#四、单机部署" class="header-anchor">#</a> 四、单机部署</h2> <h3 id="windows系统中的安装启动"><a href="#windows系统中的安装启动" class="header-anchor">#</a> Windows系统中的安装启动</h3> <p><strong>第一步：下载安装包</strong></p> <p>MongoDB提供了可用于32位和64位系统的预编译二进制包，你可以从MongoDB官网下载安装，MongoDB预编译二进制包下载地址：</p> <p><code>https://www.mongodb.com/try/download/community</code></p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623398931(1).png" alt="1623398931(1)"></p> <p>根据上图所示下载zip包。</p> <p>提示：版本的选择：</p> <p>MongoDB的版本命名规范： x.y.z</p> <p>y为奇数时表示当前版本为开发版，如：1.5.2、4.1.13</p> <p>y为偶数时表示当前版本为稳定版，如：1.6.3、4.0.10</p> <p>z是修正版本号，数字越大越好。</p> <p>详情：http://docs.mongodb.org/manual/release-notes/#release-version-numbers</p> <p><strong>第二步：解压安装启动</strong></p> <p>将压缩包解压到一个目录中。</p> <p>在解压目录中，手动建立一个目录用户存放数据文件，如<code>data/db</code></p> <p>方式1：命令行参数方式启动服务</p> <p>在bin目录中打开命令行提示符，输入如下命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>mongod --dbpath<span class="token operator">=</span><span class="token punctuation">..</span><span class="token punctuation">\</span>data<span class="token punctuation">\</span>db
</code></pre></div><p>我们在启动信息中可以看到，mongoDB的默认端口是27017，如果我们想改变默认的启动端口，可以通过--port来指定端口。</p> <p>为了方便我们每次启动，可以将安装目录的bin目录设置到环境变量的path中， bin 目录下是一些常用命令，比如 mongod 启动服务用的， mongo 客户端连接服务用的</p> <p>方式2：配置文件方式启动服务</p> <p>在解压目录中新建 config 文件夹，该文件夹中新建配置文件 mongod.conf ，内如参考如下：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">storage</span><span class="token punctuation">:</span>
 <span class="token comment">#The directory where the mongod instance stores its data.Default Value is &quot;\data\db&quot; on Windows.</span>
 <span class="token key atrule">dbPath</span><span class="token punctuation">:</span> D<span class="token punctuation">:</span>\02_Server\DBServer\mongodb<span class="token punctuation">-</span>win32<span class="token punctuation">-</span>x86_64<span class="token punctuation">-</span>2008plus<span class="token punctuation">-</span>ssl<span class="token punctuation">-</span>4.0.1\data
</code></pre></div><p>详细配置项内容可以参考官方文档：https://docs.mongodb.com/manual/reference/configuration-options\</p> <p>【注意】</p> <p>1）配置文件中如果使用双引号，比如路径地址，自动会将双引号的内容转义。如果不转义，则会报错：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>error-parsing-yaml-config-file-yaml-cpp-error-at-line-3-column-15-unknown-escape-character-d
</code></pre></div><p>解决：</p> <p>a.对 \ 换成 / 或 \</p> <p>b.如果路径中没有空格，则无需加引号。</p> <p>2）配置文件中不能以Tab分割字段</p> <p>解决：</p> <p>将其转换成空格。</p> <p><strong>启动方式：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>mongod -f <span class="token punctuation">..</span>/config/mongod.conf
或
mongod --config <span class="token punctuation">..</span>/config/mongod.conf
</code></pre></div><p>更多参数配置：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemLog:
 destination: <span class="token function">file</span>
 <span class="token comment">#The path of the log file to which mongod or mongos should send all diagnostic logging information</span>
 path: <span class="token string">&quot;D:/02_Server/DBServer/mongodb-win32-x86_64-2008plus-ssl-4.0.1/log/mongod.log&quot;</span>
 logAppend: <span class="token boolean">true</span>
storage:
 journal:
  enabled: <span class="token boolean">true</span>
 <span class="token comment">#The directory where the mongod instance stores its data.Default Value is &quot;/data/db&quot;.</span>
 dbPath: <span class="token string">&quot;D:/02_Server/DBServer/mongodb-win32-x86_64-2008plus-ssl-4.0.1/data&quot;</span>
net:
 <span class="token comment">#bindIp: 127.0.0.1</span>
 port: <span class="token number">27017</span>
setParameter:
 enableLocalhostAuthBypass: <span class="token boolean">false</span>

</code></pre></div><h3 id="shell链接-mongo命令"><a href="#shell链接-mongo命令" class="header-anchor">#</a> Shell链接（Mongo命令）</h3> <p>在命令提示符输入一下Shell命令即可完成登录</p> <div class="language-bash extra-class"><pre class="language-bash"><code>mongo
或
mongo --host<span class="token operator">=</span><span class="token number">127.0</span>.0.1 --port<span class="token operator">=</span><span class="token number">27017</span>
</code></pre></div><p>查看已有的数据库</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span>show databases
</code></pre></div><p>退出mongoDB</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">exit</span>
</code></pre></div><p>更多参数可以通过帮助查看</p> <div class="language-bash extra-class"><pre class="language-bash"><code>mongo --help
</code></pre></div><p>提示：</p> <p>MongoDB JavaScript shell是一个基于javascript的解释器，故是支持js程序的。</p> <h3 id="compass-图形化界面客户端"><a href="#compass-图形化界面客户端" class="header-anchor">#</a> Compass-图形化界面客户端</h3> <p>到MongoDB官网下载MongoDB Compass，</p> <p>地址：<code>https://www.mongodb.com/try/download/compass</code></p> <p>如果下载安装版，则需要按照步骤安装；如果下载加压缩版，直接解压，执行里面的<code>MongoDBCompassCommunity.exe</code>文件即可</p> <p>在打开的界面中，输入主机地址，端口等相关信息，点击连接：</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623404502(1).png" alt="1623404502(1)"></p> <h3 id="linux系统中的安装启动和连接"><a href="#linux系统中的安装启动和连接" class="header-anchor">#</a> Linux系统中的安装启动和连接</h3> <p>目标：在Linux中部署一个单机的MongoDB，作为生产环境下使用。</p> <p>提示：和Windows下操作差不多。</p> <p><strong>步骤如下：</strong></p> <p>1、先到官网下载压缩包 mongod-linux-x86_64-4.0.10.tgz 。</p> <p>2、上传压缩包到Linux中，解压到当前目录：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">tar</span> -xvf mongodb-linux-x86_64-4.0.10.tgz
</code></pre></div><p>3、移动解压后的文件夹到指定的目录中：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mv</span> mongodb-linux-x86_64-4.0.10 /usr/local/mongodb
</code></pre></div><p>4、新建几个目录，分别用来存储数据和日志：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 数据存储目录</span>
<span class="token function">mkdir</span> -p /mongodb/single/data/db
<span class="token comment"># 日志存储目录</span>
<span class="token function">mkdir</span> -p /mongodb/single/log
</code></pre></div><p>5、新建并修改配置文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vi</span> /mongodb/single/mongod.conf
</code></pre></div><p>配置文件内容如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemLog:
 <span class="token comment">#MongoDB发送所有日志输出的目标指定为文件</span>
 <span class="token comment"># #The path of the log file to which mongod or mongos should send all diagnostic logging information</span>
 destination: <span class="token function">file</span>
 <span class="token comment">#mongod或mongos应向其发送所有诊断日志记录信息的日志文件的路径</span>
 path: <span class="token string">&quot;/mongodb/single/log/mongod.log&quot;</span>
 <span class="token comment">#当mongos或mongod实例重新启动时，mongos或mongod会将新条目附加到现有日志文件的末尾。</span>
 logAppend: <span class="token boolean">true</span>
storage:
 <span class="token comment">#mongod实例存储其数据的目录。storage.dbPath设置仅适用于mongod。</span>
 <span class="token comment">##The directory where the mongod instance stores its data.Default Value is &quot;/data/db&quot;.</span>
 dbPath: <span class="token string">&quot;/mongodb/single/data/db&quot;</span>
 journal:
  <span class="token comment">#启用或禁用持久性日志以确保数据文件保持有效和可恢复。</span>
  enabled: <span class="token boolean">true</span>
processManagement:
 <span class="token comment">#启用在后台运行mongos或mongod进程的守护进程模式。</span>
 fork: <span class="token boolean">true</span>
net:
<span class="token comment">#服务实例绑定的IP，默认是localhost</span>
 bindIp: localhost,192.168.0.2
 <span class="token comment">#bindIp</span>
 <span class="token comment">#绑定的端口，默认是27017</span>
 port: <span class="token number">27017</span>

</code></pre></div><p>6、启动MongoDB服务</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@bobohost single<span class="token punctuation">]</span><span class="token comment"># /usr/local/mongodb/bin/mongod -f /mongodb/single/mongod.conf</span>
about to fork child process, waiting <span class="token keyword">until</span> server is ready <span class="token keyword">for</span> connections.
forked process: <span class="token number">90384</span>
child process started successfully, parent exiting
</code></pre></div><p>注意：</p> <p>如果启动后不是 successfully ，则是启动失败了。原因基本上就是配置文件有问题。</p> <p>通过进程来查看服务是否启动了：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@bobohost single<span class="token punctuation">]</span><span class="token comment"># ps -ef |grep mongod</span>
root <span class="token number">90384</span> <span class="token number">1</span> <span class="token number">0</span> <span class="token number">8</span>月26 ? 00:02:13 /usr/local/mongdb/bin/mongod -f /mongodb/single/mongod.conf
</code></pre></div><p>7、分别使用mongo命令和compass工具来连接测试。</p> <p>提示：如果远程连接不上，需要配置防火墙放行，或直接关闭linux防火墙</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#查看防火墙状态</span>
systemctl status firewalld
<span class="token comment">#临时关闭防火墙</span>
systemctl stop firewalld
<span class="token comment">#开机禁止启动防火墙</span>
systemctl disable firewalld
</code></pre></div><p>8、停止关闭服务</p> <p>停止服务的方式有两种：快速关闭和标准关闭，下面依次说明：</p> <p>（一）快速关闭方法（快速，简单，数据可能会出错）</p> <p>目标：通过系统的kill命令直接杀死进程： 杀完要检查一下，避免有的没有杀掉。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#通过进程编号关闭节点</span>
<span class="token function">kill</span> -2 <span class="token number">54410</span>
</code></pre></div><p>【补充】</p> <p>如果一旦是因为数据损坏，则需要进行如下操作（了解）：</p> <p>1）删除lock文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">rm</span> -f /mongodb/single/data/db/*.lock
</code></pre></div><p>2）修复数据：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>/usr/local/mongdb/bin/mongod --repair --dbpath<span class="token operator">=</span>/mongodb/single/data/db
</code></pre></div><p>（二）标准的关闭方法（数据不容易出错，但麻烦）：</p> <p>目标：通过mongo客户端中的shutdownServer命令来关闭服务</p> <p>主要的操作步骤参考如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//客户端登录服务，注意，这里通过localhost登录，如果需要远程登录，必须先登录认证才行。
mongo --port <span class="token number">27017</span>
//<span class="token comment">#切换到admin库</span>
use admin
//关闭服务
db.shutdownServer<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="五、基本常用命令"><a href="#五、基本常用命令" class="header-anchor">#</a> 五、基本常用命令</h2> <h3 id="案例需求"><a href="#案例需求" class="header-anchor">#</a> 案例需求</h3> <p>存放文章评论的数据存放到MongoDB中，数据结构参考如下：</p> <p>数据库：articledb</p> <table><thead><tr><th>专栏文章评论</th> <th>comment</th> <th></th> <th></th></tr></thead> <tbody><tr><td>字段名称</td> <td>字段含义</td> <td>字段类型</td> <td>备注</td></tr> <tr><td>_id</td> <td>ID</td> <td>ObjectId或String</td> <td>Mongo的主键的字段</td></tr> <tr><td>articleid</td> <td>文章ID</td> <td>String</td> <td></td></tr> <tr><td>content</td> <td>评论内容</td> <td>String</td> <td></td></tr> <tr><td>userid</td> <td>评论人ID</td> <td>String</td> <td></td></tr> <tr><td>nickname</td> <td>评论人昵称</td> <td>String</td> <td></td></tr> <tr><td>createdatetime</td> <td>评论的日期时间</td> <td>Date</td> <td></td></tr> <tr><td>likenum</td> <td>点赞数</td> <td>Int32</td> <td></td></tr> <tr><td>replynum</td> <td>回复数</td> <td>Int64</td> <td></td></tr> <tr><td>state</td> <td>状态</td> <td>String</td> <td>0：不可见；1：可见；</td></tr> <tr><td>parentid</td> <td>上级ID</td> <td>String</td> <td>如果为0表示文章的顶级评论</td></tr></tbody></table> <h3 id="数据库操作"><a href="#数据库操作" class="header-anchor">#</a> 数据库操作</h3> <p><strong>选择和创建数据库</strong></p> <p>选择和创建数据库的语法格式：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>use 数据库名称
</code></pre></div><p>如果数据库不存在则自动创建，例如，以下语句创建<code>articledb</code>数据库</p> <div class="language-bash extra-class"><pre class="language-bash"><code>use articledb
</code></pre></div><p>查看有权限查看的所有数据库命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code>show databases
或
show dbs
</code></pre></div><blockquote><p>注意：在MongoDB中，集合只有在有内容的时候才会创建！就是说，创建集合（数据表）后要插入一个文档（记录），集合才会真正创建。</p></blockquote> <p>查看当前正在使用的数据库命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db
</code></pre></div><p>MongoDB中默认的数据库为test，如果你没有选择数据库，集合将存放在test数据库中。</p> <p>另外：</p> <p>数据库名可以满足以下条件的任意UTF-8字符串</p> <ul><li>不能是空字符串（&quot;&quot;）。</li> <li>不得含有' '（空格）、. 、$ 、 \、/和\0(空字符)</li> <li>应全部小写</li> <li>最多64字节</li></ul> <p>有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库。</p> <ul><li>**admin：**从权限的角度看，这是&quot;root&quot;数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从数据库运行，比如列出所有的数据库和关闭服务器。</li> <li>**local：**这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合。</li> <li>**config：**当Mongo用于分片设置时，config数据库在内部使用，用于保存分片的相关信息。</li></ul> <p><strong>数据库的删除</strong></p> <p>MongoDB删除数据库的语法格式如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.dropDatabase<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>提示：主要用来删除已经持久化的数据库。</p> <h3 id="集合操作"><a href="#集合操作" class="header-anchor">#</a> 集合操作</h3> <p>集合，类似于关系数据库中的表。</p> <p>可以显示创建，也可以隐式的创建。</p> <p><strong>集合的显示创建（了解）</strong></p> <p>基本语法格式：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.createCollection<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
</code></pre></div><p>参数说明：</p> <ul><li>name：要创建的集合名称</li></ul> <p>例如：创建一个名为mycollection的普通集合</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.createCollection<span class="token punctuation">(</span><span class="token string">&quot;mycollection&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>查看当前数据库中的表：show tables命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code>show tables
或
show collections
</code></pre></div><p>集合的命名规范：</p> <ul><li>集合名不能是空字符串&quot;&quot;。</li> <li>集合名不能含有\0字符（空字符），这个字符表示集合名的结尾。</li> <li>集合名不能以&quot;system.&quot;开开头，这是为系统保留的前缀。</li> <li>用户创建的集合名不能含有保留字符。有些驱动程序的确支持在集合里面包含，这是因为某些系统生成的集合中包含该字符。除非你要访问这种系统创建的集合，否则千万不要再名字里出现$。</li></ul> <p><strong>集合的隐式创建</strong></p> <p>当向一个集合中插入一个文档的时候，如果集合不存在，则会自动创建集合。</p> <p>详见 文档的插入 章节。</p> <p>提示：通常我们使用隐式创建文档即可。</p> <p><strong>集合的删除</strong></p> <p>集合删除语法格式如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.connection.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
或
db.集合.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>返回值</p> <p>如果成功删除选定集合，则 drop() 方法返回 true，否则返回 false。</p> <p>例如：要删除mycollection集合</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.mycollection.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="文档基本crud"><a href="#文档基本crud" class="header-anchor">#</a> 文档基本CRUD</h3> <p>文档（document）的数据结构和 JSON 基本一样。</p> <p>所有存储在集合中的数据都是 BSON 格式。</p> <p><strong>文档插入</strong></p> <p>1、当个文档插入</p> <p>使用insert() 或 save() 方法向集合中插入文档，语法如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.insert<span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>document or array of documents<span class="token operator">&gt;</span>,
    <span class="token punctuation">{</span>
        writeConcern: <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>,
        ordered: <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>document</td> <td>document or array</td> <td>要插入到集合中的文档或文档数组。（(json格式）</td></tr> <tr><td>writeConcern</td> <td>document</td> <td>Optional. A document expressing the write concern. Omit to use the default write concern. See Write Concern.Do not explicitly set the write concern for the operation if run in a transaction. To use write concern with transactions, see Transactions and Write Concern.</td></tr> <tr><td>ordered</td> <td>boolean</td> <td>可选。如果为真，则按顺序插入数组中的文档，如果其中一个文档出现错误，MongoDB将返回而 不处理数组中的其余文档。如果为假，则执行无序插入，如果其中一个文档出现错误，则继续处理 数组中的主文档。在版本2.6+中默认为true</td></tr></tbody></table> <p>【示例】 要向comment的集合(表)中插入一条测试数据：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100000&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;今天天气真好，阳光明
媚&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1001&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Rose&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span>:null<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>提示：</p> <p>1）comment集合如果不存在，则会隐式创建</p> <p>2）mongo中的数字，默认情况下是double类型，如果要存整型，必须使用函数NumberInt(整型数字)，否则取出来就有问题了。</p> <p>3）插入当前日期使用 new Date()</p> <p>4）插入的数据没有指定 _id ，会自动生成主键值</p> <p>5）如果某字段没值，可以赋值为null，或不写该字段。</p> <p>执行后，如下，说明插入一个数据成功了。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>注意：</p> <ol><li>文档中的键/值对是有序的。</li> <li>文档中的值不仅可以是在双引号里面的字符串，还可以是其他几种数据类型（甚至可以是整个嵌入的文档)。</li> <li>MongoDB区分类型和大小写。</li> <li>MongoDB的文档不能有重复的键。</li> <li>文档的键是字符串。除了少数例外情况，键可以使用任意UTF-8字符。</li></ol> <p>文档键命名规范：</p> <ul><li>键不能含有\0 (空字符)。这个字符用来表示键的结尾。</li> <li>.和$有特别的意义，只有在特定环境下才能使用。</li> <li>以下划线&quot;_&quot;开头的键是保留的(不是严格要求的)。</li></ul> <p>2、批量插入</p> <p>语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.insertMany<span class="token punctuation">(</span>
    <span class="token punctuation">[</span> <span class="token operator">&lt;</span>document <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> , <span class="token operator">&lt;</span>document <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>, <span class="token punctuation">..</span>. <span class="token punctuation">]</span>,
    <span class="token punctuation">{</span>
        writeConcern: <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>,
        ordered: <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>document</td> <td>document or array</td> <td>要插入到集合中的文档或文档数组。（(json格式）</td></tr> <tr><td>writeConcern</td> <td>document</td> <td>Optional. A document expressing the write concern. Omit to use the default write concern. See Write Concern.Do not explicitly set the write concern for the operation if run in a transaction. To use write concern with transactions, see Transactions and Write Concern.</td></tr> <tr><td>ordered</td> <td>boolean</td> <td>可选。如果为真，则按顺序插入数组中的文档，如果其中一个文档出现错误，MongoDB将返回而 不处理数组中的其余文档。如果为假，则执行无序插入，如果其中一个文档出现错误，则继续处理 数组中的主文档。在版本2.6+中默认为true</td></tr></tbody></table> <p>【示例】 批量插入多条文章评论：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.insertMany<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;我们不应该把清晨浪费在手机上，健康很重要，一杯温水幸福你我
    他。&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1002&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;相忘于江湖&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-
    05T22:08:15.522Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;我夏天空腹喝凉开水，冬天喝温开水&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1005&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;伊人憔
    悴&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-05T23:58:51.485Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">888</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;3&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;我一直喝凉开水，冬天夏天都喝。&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1004&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;杰克船
    长&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-06T01:05:06.321Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;4&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;专家说不能空腹吃饭，影响健康。&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1003&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;凯
    撒&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-06T08:18:35.288Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;5&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;研究表明，刚烧开的水千万不能喝，因为烫
    嘴。&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1003&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;凯撒&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-
    06T11:01:02.521Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>提示：</p> <p>插入时指定了 _id ，则主键就是该值。</p> <p>如果某条数据插入失败，将会终止插入，但已经插入成功的数据不会回滚掉。</p> <p>因为批量插入由于数据较多容易出现失败，因此，可以使用try catch进行异常捕捉处理，测试的时候可以不处理。如（了解）：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>try <span class="token punctuation">{</span>
db.comment.insertMany<span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;我们不应该把清晨浪费在手机上，健康很重要，一杯温水幸福你我
    他。&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1002&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;相忘于江湖&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-
    05T22:08:15.522Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;我夏天空腹喝凉开水，冬天喝温开水&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1005&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;伊人憔
    悴&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-05T23:58:51.485Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">888</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;3&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;我一直喝凉开水，冬天夏天都喝。&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1004&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;杰克船
    长&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-06T01:05:06.321Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">666</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;4&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;专家说不能空腹吃饭，影响健康。&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1003&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;凯
    撒&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-06T08:18:35.288Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>,
    <span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;5&quot;</span>,<span class="token string">&quot;articleid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;100001&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;研究表明，刚烧开的水千万不能喝，因为烫
    嘴。&quot;</span>,<span class="token string">&quot;userid&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1003&quot;</span>,<span class="token string">&quot;nickname&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;凯撒&quot;</span>,<span class="token string">&quot;createdatetime&quot;</span>:new Date<span class="token punctuation">(</span><span class="token string">&quot;2019-08-
    06T11:01:02.521Z&quot;</span><span class="token punctuation">)</span>,<span class="token string">&quot;likenum&quot;</span>:NumberInt<span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>,<span class="token string">&quot;state&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> catch <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	print <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>文档的基本查询</strong></p> <p>查询数据的语法格式如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.find<span class="token punctuation">(</span><span class="token operator">&lt;</span>query<span class="token operator">&gt;</span>, <span class="token punctuation">[</span>projection<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>query</td> <td>document</td> <td>可选。使用查询运算符指定选择筛选器。若要返回集合中的所有文档，请省略此参数或传递空文档 ( {} )。</td></tr> <tr><td>projection</td> <td>document</td> <td>可选。指定要在与查询筛选器匹配的文档中返回的字段（投影）。若要返回匹配文档中的所有字段， 请省略此参数。</td></tr></tbody></table> <p>【示例】</p> <p>（1）查询所有</p> <p>如果我们要查询spit集合的所有文档，我们输入以下命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">)</span>
或
db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这里你会发现每条文档会有一个叫_id的字段，这个相当于我们原来关系数据库中表的主键，当你在插入文档记录时没有指定该字段， MongoDB会自动创建，其类型是ObjectID类型。</p> <p>如果我们在插入文档记录时指定该字段也可以，其类型可以是ObjectID类型，也可以是MongoDB支持的任意类型。</p> <p>如果我想按一定条件来查询，比如我想查询userid为1003的记录，怎么办？很简单！只 要在find()中添加参数即可，参数也是json格式，如 下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">'1003'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果你只需要返回符合条件的第一条数据，我们可以使用findOne命令来实现，语法和find一样。</p> <p>如：查询用户编号是1003的记录，但只最多返回符合条件的第一条记录：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.findOne<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">'1003'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>（2）投影查询（Projection Query）：</p> <p>如果要查询结果返回部分字段，则需要使用投影查询（不显示所有字段，只显示指定的字段）。</p> <p>如：查询结果只显示 _id、userid、nickname :</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1003&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>userid:1,nickname:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;4&quot;</span>, <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1003&quot;</span>, <span class="token string">&quot;nickname&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;凯撒&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;5&quot;</span>, <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1003&quot;</span>, <span class="token string">&quot;nickname&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;凯撒&quot;</span> <span class="token punctuation">}</span>
</code></pre></div><p>默认 _id 会显示。</p> <p>如：查询结果只显示 、userid、nickname ，不显示 _id ：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1003&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>userid:1,nickname:1,_id:0<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1003&quot;</span>, <span class="token string">&quot;nickname&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;凯撒&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1003&quot;</span>, <span class="token string">&quot;nickname&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;凯撒&quot;</span> <span class="token punctuation">}</span>
</code></pre></div><p>再例如：查询所有数据，但只显示 _id、userid、nickname</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>userid:1,nickname:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>文档的更新</strong></p> <p>更新文档的语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.update<span class="token punctuation">(</span>query, update, options<span class="token punctuation">)</span>
//或
db.collection.update<span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>query<span class="token operator">&gt;</span>,
    <span class="token operator">&lt;</span>update<span class="token operator">&gt;</span>,
    <span class="token punctuation">{</span>
        upsert: <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>,
        multi: <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>,
        writeConcern: <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>,
        collation: <span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>,
        arrayFilters: <span class="token punctuation">[</span> <span class="token operator">&lt;</span>filterdocument<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>, <span class="token punctuation">..</span>. <span class="token punctuation">]</span>,
        hint: <span class="token operator">&lt;</span>document<span class="token operator">|</span>string<span class="token operator">&gt;</span> // Available starting <span class="token keyword">in</span> MongoDB <span class="token number">4.2</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>query</td> <td>document</td> <td>更新的选择条件。可以使用与find（）方法中相同的查询选择器，类似sql update查询内where后面的。。在3.0版中进行了更改：当使用upsert:true执行update（）时，如果查询使用点表示法在_id字段上指定条件，则MongoDB将拒绝插入新文档。</td></tr> <tr><td>update</td> <td>document<br>or<br>pipeline</td> <td>要应用的修改。该值可以是：包含更新运算符表达式的文档，或仅包含：对的替换文档，或在MongoDB 4.2中启动聚合管道。管道可以由以下阶段组成：</td></tr> <tr><td>upsert</td> <td>boolean</td> <td>可选。如果设置为true，则在没有与查询条件匹配的文档时创建新文档。默认值为false，如果找不到匹配项，则不会插入新文档。</td></tr> <tr><td>multi</td> <td>boolean</td> <td>可选。如果设置为true，则更新符合查询条件的多个文档。如果设置为false，则更新一个文档。默认值为false。</td></tr> <tr><td>writeConcern</td> <td>document</td> <td>可选。表示写问题的文档。抛出异常的级别。</td></tr> <tr><td>collation</td> <td>document</td> <td>可选。<br> 指定要用于操作的校对规则。 <br>校对规则允许用户为字符串比较指定特定于语言的规则，例如字母大小写和重音标记的规则。<br> 校对规则选项具有以下语法：<br> 校对规则：{ <br>区域设置：，<br> caseLevel:， <br>caseFirst:，<br> 强度：，<br> numericordering:，<br> 替代：， <br>最大变量：，<br> 向后：<br> } <br>指定校对规则时，区域设置字段是必需的；所有其他校对规则字段都是可选的。有关字段的说明，请参阅校对规则文档。<br> 如果未指定校对规则，但集合具有默认校对规则（请参见db.createCollection（）），则该操作将使用为集合指定的校对规则。<br> 如果没有为集合或操作指定校对规则，MongoDB将使用以前版本中使用的简单二进制比较进行字符串比较。不能为一个操作指定多个校对规则。例如，不能为每个字段指定不同的校对规则，或者如果使用排序执行查找，则不能将一个校对规则用于查找，另一个校对规则用于排序。<br> 3.4版新增。</td></tr> <tr><td>arrayFilters</td> <td>array</td> <td></td></tr> <tr><td>hint</td> <td>Document or String</td> <td>可选。指定用于支持查询谓词的索引的文档或字符串。该选项可以采用索引规范文档或索引名称字符串。如果指定的索引不存在，则说明操作错误。例如，请参阅版本4中的“为更新操作指定提示。</td></tr></tbody></table> <p>提示：</p> <p>主要关注前四个参数即可。</p> <p>【示例】</p> <p>（1）覆盖的修改</p> <p>如果我们想修改_id为1的记录，点赞量为1001，输入以下语句：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.update<span class="token punctuation">(</span><span class="token punctuation">{</span>_id:<span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>likenum:NumberInt<span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>执行后，我们会发现，这条文档除了likenum字段其它字段都不见了，</p> <p>（2）局部修改</p> <p>为了解决这个问题，我们需要使用修改器$set来实现，命令如下：</p> <p>我们想修改_id为2的记录，浏览量为889，输入以下语句：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.update<span class="token punctuation">(</span><span class="token punctuation">{</span>_id:<span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span>likenum:NumberInt<span class="token punctuation">(</span><span class="token number">889</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这样就OK啦。</p> <p>（3）批量的修改</p> <p>更新所有用户为 1003 的用户的昵称为 凯撒大帝 。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//默认只修改第一条数据
db.comment.update<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1003&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span>nickname:<span class="token string">&quot;凯撒2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
//修改所有符合条件的数据
db.comment.update<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1003&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span>nickname:<span class="token string">&quot;凯撒大帝&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>multi:true<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>提示：如果不加后面的参数，则只更新符合条件的第一条记录</p> <p>（4）列值增长的修改</p> <p>如果我们想实现对某列值在原有值的基础上进行增加或减少，可以使用 $inc 运算符来实现。</p> <p>需求：对3号数据的点赞数，每次递增1</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.update<span class="token punctuation">(</span><span class="token punctuation">{</span>_id:<span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$inc</span>:<span class="token punctuation">{</span>likenum:NumberInt<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>删除文档</strong></p> <p>删除文档的语法结构：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.集合名称.remove<span class="token punctuation">(</span>名称<span class="token punctuation">)</span>
</code></pre></div><p>以下语句可以将数据全部删除，请慎用</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果删除_id=1的记录，输入以下语句</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.remove<span class="token punctuation">(</span><span class="token punctuation">{</span>_id:<span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="文档的分页查询"><a href="#文档的分页查询" class="header-anchor">#</a> 文档的分页查询</h3> <p><strong>统计查询</strong></p> <p>统计查询使用count()方法，语法如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.count<span class="token punctuation">(</span>query,options<span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>query</td> <td>document</td> <td>查询选择条件</td></tr> <tr><td>options</td> <td>document</td> <td>可选。用于修改计数的额外选项。</td></tr></tbody></table> <p>提示：</p> <p>可选项暂时不使用。</p> <p>【示例】</p> <p>（1）统计所有记录数：</p> <p>统计comment集合的所有的记录数：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.count<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>（2）按条件统计记录数：</p> <p>例如：统计userid为1003的记录条数</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.count<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1003&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>提示：</p> <p>默认情况下 count() 方法返回符合条件的全部记录条数。</p> <p><strong>分页列表查询</strong></p> <p>可以使用limit()方法来读取指定数量的数据，使用skip()方法来跳过指定数量的数据。</p> <p>基本语法如下所示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span>db.COLLECTION_NAME.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span>NUMBER<span class="token punctuation">)</span>.skip<span class="token punctuation">(</span>NUMBER<span class="token punctuation">)</span>
</code></pre></div><p>如果你想返回指定条数的记录，可以在find方法后调用limit来返回结果(TopN)，默认值20，例如：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><p>skip方法同样接受一个数字参数作为跳过的记录条数。（前N个不要）,默认值是0</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><p>分页查询：需求：每页2个，第二页开始：跳过前两条数据，接着值显示3和4条数据</p> <div class="language-bash extra-class"><pre class="language-bash"><code>//第一页
db.comment.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
//第二页
db.comment.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
//第三页
db.comment.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>排序查询</strong></p> <p>sort() 方法对数据进行排序，sort() 方法可以通过参数指定排序的字段，并使用 1 和 -1 来指定排序的方式，其中 1 为升序排列，而 -1 是用 于降序排列。</p> <p>语法如下所示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.COLLECTION_NAME.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>KEY:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
或
db.集合名称.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span>排序方式<span class="token punctuation">)</span>
</code></pre></div><p>例如：</p> <p>对userid降序排列，并对访问量进行升序排列</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:-1,likenum:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>提示：</p> <p>skip(), limilt(), sort()三个放在一起执行的时候，执行的顺序是先 sort(), 然后是 skip()，最后是显示的 limit()，和命令编写顺序无关。</p> <h3 id="文档的更多查询"><a href="#文档的更多查询" class="header-anchor">#</a> 文档的更多查询</h3> <p><strong>正则的复杂条件查询</strong></p> <p>MongoDB的模糊查询是通过正则表达式的方式实现的。格式为：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.find<span class="token punctuation">(</span><span class="token punctuation">{</span>field:/正则表达式/<span class="token punctuation">}</span><span class="token punctuation">)</span>
或
db.集合.find<span class="token punctuation">(</span><span class="token punctuation">{</span>字段:/正则表达式/<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>提示：正则表达式是js的语法，直接量的写法。</p> <p>例如，我要查询评论内容包含“开水”的所有文档，代码如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span>:/开水/<span class="token punctuation">}</span><span class="token punctuation">)</span>.pretty<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>如果要查询评论的内容中以“专家”开头的，代码如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;content&quot;</span>:/^专家/<span class="token punctuation">}</span><span class="token punctuation">)</span>.pretty<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>比较查询</strong></p> <p>&lt;, &lt;=, &gt;, &gt;= 这个操作符也是很常用的，格式如下:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.集合名称.find<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;field&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token variable">$gt</span><span class="token builtin class-name">:</span> value <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> // 大于: field <span class="token operator">&gt;</span> value
db.集合名称.find<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;field&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token variable">$lt</span><span class="token builtin class-name">:</span> value <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> // 小于: field <span class="token operator">&lt;</span> value
db.集合名称.find<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;field&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token variable">$gte</span><span class="token builtin class-name">:</span> value <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> // 大于等于: field <span class="token operator">&gt;</span><span class="token operator">=</span> value
db.集合名称.find<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;field&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token variable">$lte</span><span class="token builtin class-name">:</span> value <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> // 小于等于: field <span class="token operator">&lt;</span><span class="token operator">=</span> value
db.集合名称.find<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;field&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token variable">$ne</span><span class="token builtin class-name">:</span> value <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> // 不等于: field <span class="token operator">!=</span> value
</code></pre></div><p>示例：查询评论点赞数量大于700的记录</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;likenum&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$gt</span>:700<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>包含查询</strong></p> <p>包含使用$in操作符。 示例：查询评论的集合中userid字段包含1003或1004的文档</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;userid&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$in</span>:<span class="token punctuation">[</span><span class="token string">&quot;1003&quot;</span>,<span class="token string">&quot;1004&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>不包含使用$nin操作符。 示例：查询评论集合中userid字段不包含1003和1004的文档</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;userid&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$nin</span>:<span class="token punctuation">[</span><span class="token string">&quot;1003&quot;</span>,<span class="token string">&quot;1004&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>条件连接查询</strong></p> <p>我们如果需要查询同时满足两个以上条件，需要使用$and操作符将条件进行关联。（相 当于SQL的and） 格式为：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$and</span>:<span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>,<span class="token punctuation">{</span> <span class="token punctuation">}</span>,<span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
</code></pre></div><p>示例：查询评论集合中likenum大于等于700 并且小于2000的文档：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$and</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span>likenum:<span class="token punctuation">{</span><span class="token variable">$gte</span>:NumberInt<span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>likenum:<span class="token punctuation">{</span><span class="token variable">$lt</span>:NumberInt<span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果两个以上条件之间是或者的关系，我们使用 操作符进行关联，与前面 and的使用方式相同 格式为：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$or</span>:<span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>,<span class="token punctuation">{</span> <span class="token punctuation">}</span>,<span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
</code></pre></div><p>示例：查询评论集合中userid为1003，或者点赞数小于1000的文档记录</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$or</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1003&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>likenum:<span class="token punctuation">{</span><span class="token variable">$lt</span>:1000<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="常用命令小结"><a href="#常用命令小结" class="header-anchor">#</a> 常用命令小结</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>选择切换数据库：use articledb
插入数据：db.comment.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>bson数据<span class="token punctuation">}</span><span class="token punctuation">)</span>
查询所有数据：db.comment.find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
条件查询数据：db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>条件<span class="token punctuation">}</span><span class="token punctuation">)</span>
查询符合条件的第一条记录：db.comment.findOne<span class="token punctuation">(</span><span class="token punctuation">{</span>条件<span class="token punctuation">}</span><span class="token punctuation">)</span>
查询符合条件的前几条记录：db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>条件<span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span>条数<span class="token punctuation">)</span>
查询符合条件的跳过的记录：db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>条件<span class="token punctuation">}</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span>条数<span class="token punctuation">)</span>
修改数据：db.comment.update<span class="token punctuation">(</span><span class="token punctuation">{</span>条件<span class="token punctuation">}</span>,<span class="token punctuation">{</span>修改后的数据<span class="token punctuation">}</span><span class="token punctuation">)</span> 或db.comment.update<span class="token punctuation">(</span><span class="token punctuation">{</span>条件<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span>要修改部分的字段:数据<span class="token punctuation">}</span><span class="token punctuation">)</span>
修改数据并自增某字段值：db.comment.update<span class="token punctuation">(</span><span class="token punctuation">{</span>条件<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$inc</span>:<span class="token punctuation">{</span>自增的字段:步进值<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
删除数据：db.comment.remove<span class="token punctuation">(</span><span class="token punctuation">{</span>条件<span class="token punctuation">}</span><span class="token punctuation">)</span>
统计查询：db.comment.count<span class="token punctuation">(</span><span class="token punctuation">{</span>条件<span class="token punctuation">}</span><span class="token punctuation">)</span>
模糊查询：db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>字段名:/正则表达式/<span class="token punctuation">}</span><span class="token punctuation">)</span>
条件比较运算：db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>字段名:<span class="token punctuation">{</span><span class="token variable">$gt</span>:值<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
包含查询：db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>字段名:<span class="token punctuation">{</span><span class="token variable">$in</span>:<span class="token punctuation">[</span>值1，值2<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>或db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>字段名:<span class="token punctuation">{</span><span class="token variable">$nin</span>:<span class="token punctuation">[</span>值1，值2<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
条件连接查询：db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$and</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span>条件1<span class="token punctuation">}</span>,<span class="token punctuation">{</span>条件2<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>或db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$or</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span>条件1<span class="token punctuation">}</span>,<span class="token punctuation">{</span>条件2<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="六、索引-index"><a href="#六、索引-index" class="header-anchor">#</a> 六、索引-Index</h2> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h3> <p>索引支持在MongoDB中高效地执行查询。如果没有索引，MongoDB必须执行全集合扫描，即扫描集合中的每个文档，以选择与查询语句 匹配的文档。这种扫描全集合的查询效率是非常低的，特别在处理大量的数据时，查询可以要花费几十秒甚至几分钟，这对网站的性能是非 常致命的。</p> <p>如果查询存在适当的索引，MongoDB可以使用该索引限制必须检查的文档数。</p> <p>索引是特殊的数据结构，它以易于遍历的形式存储集合数据集的一小部分。索引存储特定字段或一组字段的值，按字段值排序。索引项的排 序支持有效的相等匹配和基于范围的查询操作。此外，MongoDB还可以使用索引中的排序返回排序结果。</p> <p>官网文档：https://docs.mongodb.com/manual/indexes/</p> <p>了解：</p> <p>MongoDB索引使用B树数据结构（确切的说是B-Tree，MySQL是B+Tree）</p> <h3 id="索引的类型"><a href="#索引的类型" class="header-anchor">#</a> 索引的类型</h3> <p><strong>单字索引段</strong></p> <p>MongoDB支持在文档的单个字段上创建用户定义的升序/降序索引，称为单字段索引（Single Field Index）。</p> <p>对于单个字段索引和排序操作，索引键的排序顺序（即升序或降序）并不重要，因为MongoDB可以在任何方向上遍历索引。</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507619(1).jpg" alt="1623507619(1)"></p> <p><strong>复合索引</strong></p> <p>MongoDB还支持多个字段的用户定义索引，即复合索引（Compound Index）。</p> <p>复合索引中列出的字段顺序具有重要意义。例如，如果复合索引由 { userid: 1, score: -1 } 组成，则索引首先按userid正序排序，然后 在每个userid的值内，再在按score倒序排序。</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507604(1).jpg" alt="1623507604(1)"></p> <p><strong>其他索引</strong></p> <p>地理空间索引（Geospatial Index）、文本索引（Text Indexes）、哈希索引（Hashed Indexes）。</p> <p>地理空间索引（Geospatial Index）</p> <p>为了支持对地理空间坐标数据的有效查询，MongoDB提供了两种特殊的索引：返回结果时使用平面几何的二维索引和返回结果时使用球面 几何的二维球面索引。</p> <p>文本索引（Text Indexes）</p> <p>MongoDB提供了一种文本索引类型，支持在集合中搜索字符串内容。这些文本索引不存储特定于语言的停止词（例如“the”、“a”、“or”）， 而将集合中的词作为词干，只存储根词。</p> <p>哈希索引（Hashed Indexes）</p> <p>为了支持基于散列的分片，MongoDB提供了散列索引类型，它对字段值的散列进行索引。这些索引在其范围内的值分布更加随机，但只支 持相等匹配，不支持基于范围的查询。</p> <h3 id="索引的管理操作"><a href="#索引的管理操作" class="header-anchor">#</a> 索引的管理操作</h3> <p><strong>索引的查看</strong></p> <p>说明：</p> <p>返回一个集合中的所有索引的数组。</p> <p>语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.getIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>提示：该语法命令运行要求是MongoDB 3.0+</p> <p>【示例】</p> <p>查看comment集合中所有的索引情况</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.getIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;v&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;key&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;_id_&quot;</span>,
        <span class="token string">&quot;ns&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;articledb.comment&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre></div><p>结果中显示的是默认 _id 索引。</p> <p>默认_id索引：</p> <p>MongoDB在创建集合的过程中，在 _id 字段上创建一个唯一的索引，默认名字为 <em>id</em> ，该索引可防止客户端插入两个具有相同值的文 档，您不能在_id字段上删除此索引。</p> <p>注意：该索引是唯一索引，因此值不能重复，即 _id 值不能重复的。在分片集群中，通常使用 _id 作为片键。</p> <p><strong>索引的创建</strong></p> <p>说明：</p> <p>在集合上创建索引。</p> <p>语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.createIndex<span class="token punctuation">(</span>keys, options<span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>keys</td> <td>document</td> <td>包含字段和值对的文档，其中字段是索引键，值描述该字段的索引类型。对于字段上的升序索引，请 指定值1；对于降序索引，请指定值-1。比如： {字段:1或-1} ，其中1 为指定按升序创建索引，如果你 想按降序来创建索引指定为 -1 即可。另外，MongoDB支持几种不同的索引类型，包括文本、地理空 间和哈希索引。</td></tr> <tr><td>options</td> <td>document</td> <td>可选。包含一组控制索引创建的选项的文档。有关详细信息，请参见选项详情列表。</td></tr></tbody></table> <p>options（更多选项）列表：</p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>background</td> <td>Boolean</td> <td>建索引过程会阻塞其它数据库操作，background可指定以后台方式创建索引，即增加 &quot;background&quot; 可选参数。 &quot;background&quot; 默认值为false。</td></tr> <tr><td>unique</td> <td>Boolean</td> <td>建立的索引是否唯一。指定为true创建唯一索引。默认值为false.</td></tr> <tr><td>name</td> <td>string</td> <td>索引的名称。如果未指定，MongoDB的通过连接索引的字段名和排序顺序生成一个索引名 称。</td></tr> <tr><td>dropDups</td> <td>Boolean</td> <td>3.0+版本已废弃。在建立唯一索引时是否删除重复记录,指定 true 创建唯一索引。默认值为 false.</td></tr> <tr><td>sparse</td> <td>Boolean</td> <td>对文档中不存在的字段数据不启用索引；这个参数需要特别注意，如果设置为true的话，在索 引字段中不会查询出不包含对应字段的文档.。默认值为 false.。</td></tr> <tr><td>expireAfterSeconds</td> <td>integer</td> <td>指定一个以秒为单位的数值，完成 TTL设定，设定集合的生存时间。</td></tr> <tr><td>v</td> <td>index version</td> <td>索引的版本号。默认的索引版本取决于mongod创建索引时运行的版本。</td></tr> <tr><td>weights</td> <td>document</td> <td>索引权重值，数值在 1 到 99,999 之间，表示该索引相对于其他索引字段的得分权重。</td></tr> <tr><td>default_language</td> <td>string</td> <td>对于文本索引，该参数决定了停用词及词干和词器的规则的列表。 默认为英语</td></tr> <tr><td>language_override</td> <td>string</td> <td>对于文本索引，该参数指定了包含在文档中的字段名，语言覆盖默认的language，默认值为 language.</td></tr></tbody></table> <p>提示：</p> <p>注意在 3.0.0 版本前创建索引方法为 db.collection.ensureIndex() ，之后的版本使用了 db.collection.createIndex() 方法， ensureIndex() 还能用，但只是 createIndex() 的别名。</p> <p>【示例】</p> <p>（1）单字段索引示例：对 userid 字段建立索引：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
    <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
    <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
    <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>参数1：按升序创建索引</p> <p>可以查看一下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.getIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;v&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;key&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
       		<span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;_id_&quot;</span>,
        <span class="token string">&quot;ns&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;articledb.comment&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
        <span class="token string">&quot;v&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;key&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        	<span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;userid_1&quot;</span>,
        <span class="token string">&quot;ns&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;articledb.comment&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>索引名字为<code>userid_1</code></p> <p>compass查看：</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507591(1).jpg" alt="1623507591(1)"></p> <p>（2）复合索引：对 userid 和 nickname 同时建立复合（Compound）索引：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:1,nickname:-1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
    <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
    <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>,
    <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

</code></pre></div><p>查看一下索引：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.getIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;v&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;key&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        	<span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;_id_&quot;</span>,
        <span class="token string">&quot;ns&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;articledb.comment&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
        <span class="token string">&quot;v&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;key&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        	<span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;userid_1&quot;</span>,
        <span class="token string">&quot;ns&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;articledb.comment&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
        <span class="token string">&quot;v&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;key&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        	<span class="token string">&quot;nickname&quot;</span> <span class="token builtin class-name">:</span> -1
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;userid_1_nickname_-1&quot;</span>,
        <span class="token string">&quot;ns&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;articledb.comment&quot;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre></div><p>compass中：</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507579(1).jpg" alt="1623507579(1)"></p> <p><strong>索引的移除</strong></p> <p>说明：可以移除指定的索引，或移除所有索引</p> <p>一、指定索引的移除</p> <p>语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.dropIndex<span class="token punctuation">(</span>index<span class="token punctuation">)</span>
</code></pre></div><p>参数：</p> <table><thead><tr><th>Parameter</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>index</td> <td>string or document</td> <td>指定要删除的索引。可以通过索引名称或索引规范文档指定索引。若要删除文本索引，请指定 索引名称。</td></tr></tbody></table> <p>【示例】</p> <p>删除 comment 集合中 userid 字段上的升序索引：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.dropIndex<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;nIndexesWas&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>, <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre></div><p>查看已经删除了。</p> <p>二、所有索引的移除</p> <p>语法：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.collection.dropIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>【示例】</p> <p>删除 spit 集合中所有索引。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.<span class="token function-name function">dropIndexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;nIndexesWas&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
    <span class="token string">&quot;msg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;non-_id indexes dropped for collection&quot;</span>,
    <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>提示： _id 的字段的索引是无法删除的，只能删除非 _id 字段的索引。</p> <h3 id="索引的引用"><a href="#索引的引用" class="header-anchor">#</a> 索引的引用</h3> <p><strong>执行计划</strong></p> <p>分析查询性能（Analyze Query Performance）通常使用执行计划（解释计划、Explain Plan）来查看查询的情况，如查询耗费的时间、是 否基于索引查询等。</p> <p>那么，通常，我们想知道，建立的索引是否有效，效果如何，都需要通过执行计划查看。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.find<span class="token punctuation">(</span>query,options<span class="token punctuation">)</span>.explain<span class="token punctuation">(</span>options<span class="token punctuation">)</span>
</code></pre></div><p>【示例】</p> <p>查看根据userid查询数据的情况：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1003&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.<span class="token function-name function">explain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;queryPlanner&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;plannerVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;namespace&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;articledb.comment&quot;</span>,
        <span class="token string">&quot;indexFilterSet&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;parsedQuery&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        	<span class="token string">&quot;<span class="token variable">$eq</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1003&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;winningPlan&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;stage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;COLLSCAN&quot;</span>,
        <span class="token string">&quot;filter&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;<span class="token variable">$eq</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1003&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,
    	<span class="token string">&quot;direction&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;forward&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;rejectedPlans&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;serverInfo&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;host&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;9ef3740277ad&quot;</span>,
        <span class="token string">&quot;port&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">27017</span>,
        <span class="token string">&quot;version&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;4.0.10&quot;</span>,
        <span class="token string">&quot;gitVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;c389e7f69f637f7a1ac3cc9fae843b635f20b766&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>关键点看： &quot;stage&quot; : &quot;COLLSCAN&quot;, 表示全集合扫描</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507566(1).jpg" alt="1623507566(1)"></p> <p>下面对userid建立索引</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
    <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
    <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
    <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>再次查看执行计划：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1013&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.<span class="token function-name function">explain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;queryPlanner&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;plannerVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;namespace&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;articledb.comment&quot;</span>,
        <span class="token string">&quot;indexFilterSet&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;parsedQuery&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        	<span class="token string">&quot;<span class="token variable">$eq</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1013&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;winningPlan&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;stage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;FETCH&quot;</span>,
        <span class="token string">&quot;inputStage&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;stage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;IXSCAN&quot;</span>,
            <span class="token string">&quot;keyPattern&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;indexName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;userid_1&quot;</span>,
            <span class="token string">&quot;isMultiKey&quot;</span> <span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;multiKeyPaths&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;isUnique&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;isSparse&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;isPartial&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;indexVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;direction&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;forward&quot;</span>,
            <span class="token string">&quot;indexBounds&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                    <span class="token string">&quot;[<span class="token entity" title="\&quot;">\&quot;</span>1013<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>1013<span class="token entity" title="\&quot;">\&quot;</span>]&quot;</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;rejectedPlans&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;serverInfo&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;host&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;9ef3740277ad&quot;</span>,
        <span class="token string">&quot;port&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">27017</span>,
        <span class="token string">&quot;version&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;4.0.10&quot;</span>,
        <span class="token string">&quot;gitVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;c389e7f69f637f7a1ac3cc9fae843b635f20b766&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>关键点看： &quot;stage&quot; : &quot;IXSCAN&quot; ,基于索引的扫描</p> <p>compass查看：</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507552(1).jpg" alt="1623507552(1)"></p> <p><strong>涵盖的查询</strong></p> <p>Covered Queries</p> <p>当查询条件和查询的投影仅包含索引字段时，MongoDB直接从索引返回结果，而不扫描任何文档或将文档带入内存。 这些覆盖的查询可以 非常有效。</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507537(1).jpg" alt="1623507537(1)"></p> <p>更多：https://docs.mongodb.com/manual/core/query-optimization/#read-operations-covered-query.</p> <p>【示例】</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1003&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>userid:1,_id:0<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1003&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;userid&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1003&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.comment.find<span class="token punctuation">(</span><span class="token punctuation">{</span>userid:<span class="token string">&quot;1003&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>userid:1,_id:0<span class="token punctuation">}</span><span class="token punctuation">)</span>.explain<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Compass中：</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507521(1).jpg" alt="1623507521(1)"></p> <h2 id="七、文章评论"><a href="#七、文章评论" class="header-anchor">#</a> 七、文章评论</h2> <h3 id="需求分析"><a href="#需求分析" class="header-anchor">#</a> 需求分析</h3> <p>某头条的文章评论业务如下：</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507501(1).jpg" alt="1623507501(1)"></p> <p>文章示例参考：早晨空腹喝水，是对还是错？https://www.toutiao.com/a6721476546088927748/</p> <p>需要实现以下功能：</p> <p>1）基本增删改查API</p> <p>2）根据文章id查询评论</p> <p>3）评论点赞</p> <h3 id="表结构分析"><a href="#表结构分析" class="header-anchor">#</a> 表结构分析</h3> <p>数据库：articledb</p> <table><thead><tr><th>专栏文章评论</th> <th>comment</th> <th></th> <th></th></tr></thead> <tbody><tr><td>字段名称</td> <td>字段含义</td> <td>字段类型</td> <td>备注</td></tr> <tr><td>_id</td> <td>ID</td> <td>ObjectId或String</td> <td>Mongo的主键的字段</td></tr> <tr><td>articleid</td> <td>文章ID</td> <td>String</td> <td></td></tr> <tr><td>content</td> <td>评论内容</td> <td>String</td> <td></td></tr> <tr><td>userid</td> <td>评论人ID</td> <td>String</td> <td></td></tr> <tr><td>nickname</td> <td>评论人昵称</td> <td>String</td> <td></td></tr> <tr><td>createdatetime</td> <td>评论的日期时间</td> <td>Date</td> <td></td></tr> <tr><td>likenum</td> <td>点赞数</td> <td>Int32</td> <td></td></tr> <tr><td>replynum</td> <td>回复数</td> <td>Int64</td> <td></td></tr> <tr><td>state</td> <td>状态</td> <td>String</td> <td>0：不可见；1：可见；</td></tr> <tr><td>parentid</td> <td>上级ID</td> <td>String</td> <td>如果为0表示文章的顶级评论</td></tr></tbody></table> <h3 id="技术选项"><a href="#技术选项" class="header-anchor">#</a> 技术选项</h3> <p><strong>mongodb-driver（了解）</strong></p> <p>mongodb-driver是mongo官方推出的java连接mongoDB的驱动包，相当于JDBC驱动。我们通过一个入门的案例来了解mongodb-driver 的基本使用。</p> <p>官方驱动说明和下载：http://mongodb.github.io/mongo-java-driver/</p> <p>官方驱动示例文档：http://mongodb.github.io/mongo-java-driver/3.8/driver/getting-started/quick-start/</p> <p><strong>SpringDataMongoDB</strong></p> <p>SpringData家族成员之一，用于操作MongoDB的持久层框架，封装了底层的mongodb-driver。</p> <p>官网主页： https://projects.spring.io/spring-data-mongodb/</p> <p>我们十次方项目的吐槽微服务就采用SpringDataMongoDB框架。</p> <h3 id="文档微服务模块搭建"><a href="#文档微服务模块搭建" class="header-anchor">#</a> 文档微服务模块搭建</h3> <p>（1）搭建项目工程article，pom.xml引入依赖：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.6.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>article<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-mongodb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>（2）创建application.yml</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
 <span class="token comment">#数据源配置</span>
 <span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">mongodb</span><span class="token punctuation">:</span>
   <span class="token comment"># 主机地址</span>
   <span class="token key atrule">host</span><span class="token punctuation">:</span> 192.168.40.141
   <span class="token comment"># 数据库</span>
   <span class="token key atrule">database</span><span class="token punctuation">:</span> articledb
   <span class="token comment"># 默认端口是27017</span>
   <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">27017</span>
   <span class="token comment">#也可以使用uri连接</span>
   <span class="token comment">#uri: mongodb://192.168.40.134:27017/articledb</span>
</code></pre></div><p>（3）创建启动类</p> <p>cn.itcast.article.ArticleApplication</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArticleApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ArticleApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（4）启动项目，看是否能正常启动，控制台没有错误。</p> <h3 id="文章品论实体类的编写"><a href="#文章品论实体类的编写" class="header-anchor">#</a> 文章品论实体类的编写</h3> <p>创建实体类 创建包cn.itcast.article，包下建包po用于存放实体类，创建实体类</p> <p>cn.itcast.article.po.Comment</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article<span class="token punctuation">.</span>po</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Id</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>core<span class="token punctuation">.</span>index<span class="token punctuation">.</span></span><span class="token class-name">Indexed</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapping<span class="token punctuation">.</span></span><span class="token class-name">Document</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>core<span class="token punctuation">.</span>mapping<span class="token punctuation">.</span></span><span class="token class-name">Field</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span>
<span class="token comment">/**
* 文章评论实体类
*/</span>
<span class="token comment">//把一个java类声明为mongodb的文档，可以通过collection参数指定这个类对应的文档。</span>
<span class="token comment">//@Document(collection=&quot;mongodb 对应 collection 名&quot;)</span>
<span class="token comment">// 若未加 @Document ，该 bean save 到 mongo 的 comment collection</span>
<span class="token comment">// 若添加 @Document ，则 save 到 comment collection</span>
<span class="token annotation punctuation">@Document</span><span class="token punctuation">(</span>collection<span class="token operator">=</span><span class="token string">&quot;comment&quot;</span><span class="token punctuation">)</span><span class="token comment">//可以省略，如果省略，则默认使用类名小写映射集合</span>
<span class="token comment">//复合索引</span>
<span class="token comment">// @CompoundIndex( def = &quot;{'userid': 1, 'nickname': -1}&quot;)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Comment</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
<span class="token comment">//主键标识，该属性的值会自动对应mongodb的主键字段&quot;_id&quot;，如果该属性名就叫“id”,则该注解可以省略，否则必须写</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span><span class="token comment">//主键</span>
    <span class="token comment">//该属性对应mongodb的字段的名字，如果一致，则无需该注解</span>
    <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//吐槽内容</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> publishtime<span class="token punctuation">;</span><span class="token comment">//发布日期</span>
    <span class="token comment">//添加了一个单字段的索引</span>
    <span class="token annotation punctuation">@Indexed</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userid<span class="token punctuation">;</span><span class="token comment">//发布人ID</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> nickname<span class="token punctuation">;</span><span class="token comment">//昵称</span>
    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createdatetime<span class="token punctuation">;</span><span class="token comment">//评论的日期时间</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> likenum<span class="token punctuation">;</span><span class="token comment">//点赞数</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> replynum<span class="token punctuation">;</span><span class="token comment">//回复数</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> state<span class="token punctuation">;</span><span class="token comment">//状态</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> parentid<span class="token punctuation">;</span><span class="token comment">//上级ID</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> articleid<span class="token punctuation">;</span>
    <span class="token comment">//getter and setter.....</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Comment{&quot;</span> <span class="token operator">+</span>
        <span class="token string">&quot;id='&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
        <span class="token string">&quot;, content='&quot;</span> <span class="token operator">+</span> content <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
        <span class="token string">&quot;, publishtime=&quot;</span> <span class="token operator">+</span> publishtime <span class="token operator">+</span>
        <span class="token string">&quot;, userid='&quot;</span> <span class="token operator">+</span> userid <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
        <span class="token string">&quot;, nickname='&quot;</span> <span class="token operator">+</span> nickname <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
        <span class="token string">&quot;, createdatetime=&quot;</span> <span class="token operator">+</span> createdatetime <span class="token operator">+</span>
        <span class="token string">&quot;, likenum=&quot;</span> <span class="token operator">+</span> likenum <span class="token operator">+</span>
        <span class="token string">&quot;, replynum=&quot;</span> <span class="token operator">+</span> replynum <span class="token operator">+</span>
        <span class="token string">&quot;, state='&quot;</span> <span class="token operator">+</span> state <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
        <span class="token string">&quot;, parentid='&quot;</span> <span class="token operator">+</span> parentid <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
        <span class="token string">&quot;, articleid='&quot;</span> <span class="token operator">+</span> articleid <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
        <span class="token string">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>说明：</p> <p>索引可以大大提升查询效率，一般在查询字段上添加索引，索引的添加可以通过Mongo的命令来添加，也可以在Java的实体类中通过注解添 加。</p> <p>1）单字段索引注解@Indexed</p> <p>org.springframework.data.mongodb.core.index.Indexed.class</p> <p>声明该字段需要索引，建索引可以大大的提高查询效率。</p> <p>Mongo命令参考：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;userid&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>2）复合索引注解@CompoundIndex</p> <p>org.springframework.data.mongodb.core.index.CompoundIndex.class</p> <p>复合索引的声明，建复合索引可以有效地提高多字段的查询效率。</p> <p>Mongo命令参考：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>db.comment.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;userid&quot;</span>:1,<span class="token string">&quot;nickname&quot;</span>:-1<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="文章评论的基本增删改查操作"><a href="#文章评论的基本增删改查操作" class="header-anchor">#</a> 文章评论的基本增删改查操作</h3> <p>（1）创建数据访问接口 cn.itcast.article包下创建dao包，包下创建接口</p> <p>cn.itcast.article.dao.CommentRepository</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article<span class="token punctuation">.</span>po<span class="token punctuation">.</span></span><span class="token class-name">Comment</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">Page</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">Pageable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>repository<span class="token punctuation">.</span></span><span class="token class-name">MongoRepository</span><span class="token punctuation">;</span>
<span class="token comment">//评论的持久层接口</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CommentRepository</span> <span class="token keyword">extends</span> <span class="token class-name">MongoRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Comment</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（2）创建业务逻辑类 cn.itcast.article包下创建service包，包下创建类</p> <p>cn.itcast.article.service.CommentService</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">CommentRepository</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article<span class="token punctuation">.</span>po<span class="token punctuation">.</span></span><span class="token class-name">Comment</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token comment">//评论的业务层</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommentService</span> <span class="token punctuation">{</span>
    <span class="token comment">//注入dao</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CommentRepository</span> commentRepository<span class="token punctuation">;</span>
    <span class="token comment">/**
    * 保存一个评论
    * @param comment
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveComment</span><span class="token punctuation">(</span><span class="token class-name">Comment</span> comment<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//如果需要自定义主键，可以在这里指定主键；如果不指定主键，MongoDB会自动生成主键</span>
        <span class="token comment">//设置一些默认初始值。。。</span>
        <span class="token comment">//调用dao</span>
        commentRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
    * 更新评论
    * @param comment
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateComment</span><span class="token punctuation">(</span><span class="token class-name">Comment</span> comment<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//调用dao</span>
        commentRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
    * 根据id删除评论
    * @param id
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteCommentById</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//调用dao</span>
        commentRepository<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
    * 查询所有评论
    * @return
    */</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Comment</span><span class="token punctuation">&gt;</span></span> <span class="token function">findCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//调用dao</span>
        <span class="token keyword">return</span> commentRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
    * 根据id查询评论
    * @param id
    * @return
    */</span>
    <span class="token keyword">public</span> <span class="token class-name">Comment</span> <span class="token function">findCommentById</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//调用dao</span>
        <span class="token keyword">return</span> commentRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（3）新建Junit测试类，测试保存和查询所有：</p> <p>cn.itcast.article.service.CommentServiceTest</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article<span class="token punctuation">.</span></span><span class="token class-name">ArticleApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>article<span class="token punctuation">.</span>po<span class="token punctuation">.</span></span><span class="token class-name">Comment</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">Page</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringRunner</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token comment">//测试评论的业务层</span>
<span class="token comment">//SpringBoot的Junit集成测试</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token comment">//SpringBoot的测试环境初始化，参数：启动类</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">ArticleApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommentServiceTest</span> <span class="token punctuation">{</span>
    <span class="token comment">//注入Service</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CommentService</span> commentService<span class="token punctuation">;</span>
    <span class="token comment">/**
    * 保存一个评论
    */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSaveComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Comment</span> comment<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Comment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        comment<span class="token punctuation">.</span><span class="token function">setArticleid</span><span class="token punctuation">(</span><span class="token string">&quot;100000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        comment<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">&quot;测试添加的数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        comment<span class="token punctuation">.</span><span class="token function">setCreatedatetime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        comment<span class="token punctuation">.</span><span class="token function">setUserid</span><span class="token punctuation">(</span><span class="token string">&quot;1003&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        comment<span class="token punctuation">.</span><span class="token function">setNickname</span><span class="token punctuation">(</span><span class="token string">&quot;凯撒大帝&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        comment<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        comment<span class="token punctuation">.</span><span class="token function">setLikenum</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        comment<span class="token punctuation">.</span><span class="token function">setReplynum</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        commentService<span class="token punctuation">.</span><span class="token function">saveComment</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
    * 查询所有数据
    */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Comment</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> commentService<span class="token punctuation">.</span><span class="token function">findCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
    * 测试根据id查询
    */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindCommentById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Comment</span> comment <span class="token operator">=</span> commentService<span class="token punctuation">.</span><span class="token function">findCommentById</span><span class="token punctuation">(</span><span class="token string">&quot;5d6a27b81b8d374798cf0b41&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>添加结果：</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507464(1).png" alt="1623507464(1)"></p> <h3 id="根据上级id查询文章评论的分页列表"><a href="#根据上级id查询文章评论的分页列表" class="header-anchor">#</a> 根据上级ID查询文章评论的分页列表</h3> <p>（1）CommentRepository新增方法定义</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//根据父id，查询子评论的分页列表</span>
<span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Comment</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByParentid</span><span class="token punctuation">(</span><span class="token class-name">String</span> parentid<span class="token punctuation">,</span> <span class="token class-name">Pageable</span> pageable<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>（2）CommentService新增方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* 根据父id查询分页列表
* @param parentid
* @param page
* @param size
* @return
*/</span>
<span class="token keyword">public</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Comment</span><span class="token punctuation">&gt;</span></span> <span class="token function">findCommentListPageByParentid</span><span class="token punctuation">(</span><span class="token class-name">String</span> parentid<span class="token punctuation">,</span><span class="token keyword">int</span> page <span class="token punctuation">,</span><span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> commentRepository<span class="token punctuation">.</span><span class="token function">findByParentid</span><span class="token punctuation">(</span>parentid<span class="token punctuation">,</span> <span class="token class-name">PageRequest</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>page<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>（3）junit测试用例：</p> <p>cn.itcast.article.service.CommentServiceTest</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* 测试根据父id查询子评论的分页列表
*/</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindCommentListPageByParentid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Comment</span><span class="token punctuation">&gt;</span></span> pageResponse <span class="token operator">=</span> commentService<span class="token punctuation">.</span><span class="token function">findCommentListPageByParentid</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----总记录数：&quot;</span><span class="token operator">+</span>pageResponse<span class="token punctuation">.</span><span class="token function">getTotalElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;----当前页数据：&quot;</span><span class="token operator">+</span>pageResponse<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（4）测试</p> <p>使用compass快速插入一条测试数据，数据的内容是对3号评论内容进行评论。</p> <p>执行测试，结果：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>----总记录数：1
----当前页数据：<span class="token punctuation">[</span>Comment<span class="token punctuation">{</span>id<span class="token operator">=</span><span class="token string">'33'</span>, <span class="token assign-left variable">content</span><span class="token operator">=</span><span class="token string">'你年轻，火力大'</span>, <span class="token assign-left variable">publishtime</span><span class="token operator">=</span>null, <span class="token assign-left variable">userid</span><span class="token operator">=</span><span class="token string">'1003'</span>, <span class="token assign-left variable">nickname</span><span class="token operator">=</span><span class="token string">'凯撒大帝'</span>,createdatetime<span class="token operator">=</span>null, <span class="token assign-left variable">likenum</span><span class="token operator">=</span>null, <span class="token assign-left variable">replynum</span><span class="token operator">=</span>null, <span class="token assign-left variable">state</span><span class="token operator">=</span><span class="token string">'null'</span>, <span class="token assign-left variable">parentid</span><span class="token operator">=</span><span class="token string">'3'</span>, <span class="token assign-left variable">articleid</span><span class="token operator">=</span><span class="token string">'100001'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

</code></pre></div><h3 id="mongotemplate实现评论点赞"><a href="#mongotemplate实现评论点赞" class="header-anchor">#</a> MongoTemplate实现评论点赞</h3> <p>我们看一下以下点赞的临时示例代码： CommentService 新增updateThumbup方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* 点赞-效率低
* @param id
*/</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateCommentThumbupToIncrementingOld</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Comment</span> comment <span class="token operator">=</span> <span class="token class-name">CommentRepository</span><span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    comment<span class="token punctuation">.</span><span class="token function">setLikenum</span><span class="token punctuation">(</span>comment<span class="token punctuation">.</span><span class="token function">getLikenum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">CommentRepository</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>comment<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上方法虽然实现起来比较简单，但是执行效率并不高，因为我只需要将点赞数加1就可以了，没必要查询出所有字段修改后再更新所有字 段。(蝴蝶效应)</p> <p>我们可以使用MongoTemplate类来实现对某列的操作。 （1）修改CommentService</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//注入MongoTemplate</span>
<span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">MongoTemplate</span> mongoTemplate<span class="token punctuation">;</span>
<span class="token comment">/**
* 点赞数+1
* @param id
*/</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateCommentLikenum</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//查询对象</span>
    <span class="token class-name">Query</span> query<span class="token operator">=</span><span class="token class-name">Query</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">Criteria</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&quot;_id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//更新对象</span>
    <span class="token class-name">Update</span> update<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//局部更新，相当于$set</span>
    <span class="token comment">// update.set(key,value)</span>
    <span class="token comment">//递增$inc</span>
    <span class="token comment">// update.inc(&quot;likenum&quot;,1);</span>
    update<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span><span class="token string">&quot;likenum&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//参数1：查询对象</span>
    <span class="token comment">//参数2：更新对象</span>
    <span class="token comment">//参数3：集合的名字或实体类的类型Comment.class</span>
    mongoTemplate<span class="token punctuation">.</span><span class="token function">updateFirst</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span>update<span class="token punctuation">,</span><span class="token string">&quot;comment&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（2）测试用例：</p> <p>cn.itcast.article.service.CommentServiceTest</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
* 点赞数+1
*/</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdateCommentLikenum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//对3号文档的点赞数+1</span>
    commentService<span class="token punctuation">.</span><span class="token function">updateCommentLikenum</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行测试用例后，发现点赞数+1了：</p> <p><img src="D:%5Czhuchuli%5Cjava%5Cmongodb%5C1623507449(1).png" alt="1623507449(1)"></p> <h2 id="八、mongodb集群和安全"><a href="#八、mongodb集群和安全" class="header-anchor">#</a> 八、MongoDB集群和安全</h2> <h3 id="课程目标"><a href="#课程目标" class="header-anchor">#</a> 课程目标</h3> <ul><li>MongoDB的副本集、操作、主要概念、故障转移、选举规则</li> <li>MongoDB的分片集群：概念、优点、操作、分片策略、故障转移</li> <li>MongoDB的安全认证</li></ul> <h2 id="九、副本集"><a href="#九、副本集" class="header-anchor">#</a> 九、副本集</h2> <h2 id="十、分片集群"><a href="#十、分片集群" class="header-anchor">#</a> 十、分片集群</h2> <h2 id="十一、安全认证"><a href="#十一、安全认证" class="header-anchor">#</a> 十一、安全认证</h2></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/26/2021, 11:12:55 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java/redis.html" class="prev">
        Redis
      </a></span> <span class="next"><a href="/java/swagger.html">
        Swagger
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6f19dab6.js" defer></script><script src="/assets/js/2.f83ece46.js" defer></script><script src="/assets/js/18.0c25836e.js" defer></script>
  </body>
</html>
